{"version":3,"sources":["webpack:////Users/product/Desktop/my/myblog/xzzblog-uniapp/components/feng-parse/parse.vue?b279","webpack:////Users/product/Desktop/my/myblog/xzzblog-uniapp/components/feng-parse/parse.vue?3d75","webpack:////Users/product/Desktop/my/myblog/xzzblog-uniapp/components/feng-parse/parse.vue?51af","webpack:////Users/product/Desktop/my/myblog/xzzblog-uniapp/components/feng-parse/parse.vue?1148","uni-app:///components/feng-parse/parse.vue"],"names":[],"mappings":"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","file":"components/feng-parse/parse.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./parse.vue?vue&type=template&id=3e580606&\"\nvar renderjs\nimport script from \"./parse.vue?vue&type=script&lang=js&\"\nexport * from \"./parse.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/feng-parse/parse.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./parse.vue?vue&type=template&id=3e580606&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./parse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./parse.vue?vue&type=script&lang=js&\"","<!--**\n * forked from：https://github.com/F-loat/mpvue-wxParse\n *\n * github地址: https://github.com/dcloudio/uParse\n *\n * for: uni-app框架下 富文本解析\n * \n * 优化 by zhiqiang.feng@qq.com\n */-->\n\n<template>\n  <!--基础元素-->\n  <view class=\"wxParse\" :class=\"className\" :style=\"'user-select:' + userSelect\">\n    <block v-for=\"(node, index) of nodes\" :key=\"index\" v-if=\"!loading\">\n      <wxParseTemplate :node=\"node\" />\n    </block>\n  </view>\n</template>\n\n<script>\nimport HtmlToJson from \"./libs/html2json\";\nimport wxParseTemplate from \"./components/wxParseTemplate0\";\n\nexport default {\n  name: \"wxParse\",\n  props: {\n    // user-select:none;\n    userSelect: {\n      type: String,\n      default: \"text\", //none |text| all | element\n    },\n    imgOptions: {\n      type: [Object, Boolean],\n      default: function () {\n        return {\n          loop: false,\n          indicator: \"number\",\n          longPressActions: false,\n          // longPressActions: {\n          // \t itemList: ['发送给朋友', '保存图片', '收藏'],\n          // \t\tsuccess: function (res) {\n          // \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n          // \t\t},\n          // \t\tfail: function (res) {\n          // \t\t\tconsole.log(res.errMsg);\n          // \t\t}\n          // \t}\n          // }\n        };\n      },\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    className: {\n      type: String,\n      default: \"\",\n    },\n    content: {\n      type: String,\n      default: \"\",\n    },\n    noData: {\n      type: String,\n      default: \"\",\n    },\n    startHandler: {\n      type: Function,\n      default() {\n        return (node) => {\n          node.attr.class = null;\n          node.attr.style = null;\n        };\n      },\n    },\n    endHandler: {\n      type: Function,\n      default() {\n        return (node) => {\n          node = node;\n        };\n      },\n    },\n    charsHandler: {\n      type: Function,\n      default() {\n        return (node) => {\n          node = node;\n        };\n      },\n    },\n    imageProp: {\n      type: Object,\n      default() {\n        return {\n          mode: \"aspectFit\",\n          padding: 0,\n          lazyLoad: false,\n          domain: \"\",\n        };\n      },\n    },\n  },\n  components: {\n    wxParseTemplate,\n  },\n  data() {\n    return {\n      nodes: {},\n      imageUrls: [],\n      wxParseWidth: {\n        value: 0,\n      },\n    };\n  },\n  computed: {},\n  mounted() {\n    this.setHtml();\n  },\n  methods: {\n    setHtml() {\n      this.getWidth().then((data) => {\n        this.wxParseWidth.value = data;\n      });\n      let {\n        content,\n        noData,\n        imageProp,\n        startHandler,\n        endHandler,\n        charsHandler,\n      } = this;\n      let parseData = content || noData;\n      let customHandler = {\n        start: startHandler,\n        end: endHandler,\n        chars: charsHandler,\n      };\n      let results = HtmlToJson(parseData, customHandler, imageProp, this);\n\n      this.imageUrls = results.imageUrls;\n      // this.nodes = results.nodes;\n\n      this.nodes = [];\n      results.nodes.forEach((item) => {\n        setTimeout(() => {\n          if (item.node) {\n            this.nodes.push(item);\n          }\n        }, 0);\n      });\n    },\n    getWidth() {\n      return new Promise((res, rej) => {\n        // #ifndef MP-ALIPAY || MP-BAIDU\n        uni\n          .createSelectorQuery()\n          .in(this)\n          .select(\".wxParse\")\n          .fields(\n            {\n              size: true,\n              scrollOffset: true,\n            },\n            (data) => {\n              res(data.width);\n            }\n          )\n          .exec();\n        // #endif\n        // #ifdef MP-BAIDU\n        const query = swan.createSelectorQuery();\n        query.select(\".wxParse\").boundingClientRect();\n        query.exec((obj) => {\n          const rect = obj[0];\n          if (rect) {\n            res(rect.width);\n          }\n        });\n        // #endif\n        // #ifdef MP-ALIPAY\n        my.createSelectorQuery()\n          .select(\".wxParse\")\n          .boundingClientRect()\n          .exec((ret) => {\n            res(ret[0].width);\n          });\n        // #endif\n      });\n    },\n    navigate(href, $event, attr) {\n      console.log(href, attr);\n      this.$emit(\"navigate\", href, $event);\n    },\n    preview(src, $event) {\n      if (!this.imageUrls.length || typeof this.imgOptions === \"boolean\") {\n      } else {\n        uni.previewImage({\n          current: src,\n          urls: this.imageUrls,\n          loop: this.imgOptions.loop,\n          indicator: this.imgOptions.indicator,\n          longPressActions: this.imgOptions.longPressActions,\n        });\n      }\n      this.$emit(\"preview\", src, $event);\n    },\n    removeImageUrl(src) {\n      const { imageUrls } = this;\n      imageUrls.splice(imageUrls.indexOf(src), 1);\n    },\n  },\n  // 父组件中提供\n  provide() {\n    return {\n      parseWidth: this.wxParseWidth,\n      parseSelect: this.userSelect,\n      // 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n    };\n  },\n  watch: {\n    content(val) {\n      this.setHtml();\n    },\n    // content: {\n    // \thandler: function(newVal, oldVal) {\n    // \t\tif (newVal !== oldVal) {\n    //\n    // \t\t}\n    // \t},\n    // \tdeep: true\n    // }\n  },\n};\n</script>\n"],"sourceRoot":""}